module.exports=[87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},11011,70121,a=>{"use strict";var b=a.i(72131);function c(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function d(...a){return b=>{let d=!1,e=a.map(a=>{let e=c(a,b);return d||"function"!=typeof e||(d=!0),e});if(d)return()=>{for(let b=0;b<e.length;b++){let d=e[b];"function"==typeof d?d():c(a[b],null)}}}}function e(...a){return b.useCallback(d(...a),a)}a.s(["composeRefs",()=>d,"useComposedRefs",()=>e],70121);var f=a.i(87924),g=b.forwardRef((a,c)=>{let{children:d,...e}=a,g=b.Children.toArray(d),i=g.find(j);if(i){let a=i.props.children,d=g.map(c=>c!==i?c:b.Children.count(a)>1?b.Children.only(null):b.isValidElement(a)?a.props.children:null);return(0,f.jsx)(h,{...e,ref:c,children:b.isValidElement(a)?b.cloneElement(a,void 0,d):null})}return(0,f.jsx)(h,{...e,ref:c,children:d})});g.displayName="Slot";var h=b.forwardRef((a,c)=>{let{children:e,...f}=a;if(b.isValidElement(e)){var g;let a,h,i=(g=e,(h=(a=Object.getOwnPropertyDescriptor(g.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.ref:(h=(a=Object.getOwnPropertyDescriptor(g,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.props.ref:g.props.ref||g.ref);return b.cloneElement(e,{...function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{f(...a),e(...a)}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(f,e.props),ref:c?d(c,i):i})}return b.Children.count(e)>1?b.Children.only(null):null});h.displayName="SlotClone";var i=({children:a})=>(0,f.jsx)(f.Fragment,{children:a});function j(a){return b.isValidElement(a)&&a.type===i}a.s(["Slot",()=>g],11011)},30553,a=>{"use strict";var b=a.i(72131),c=a.i(35112),d=a.i(11011),e=a.i(87924),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,c)=>{let f=b.forwardRef((a,b)=>{let{asChild:f,...g}=a,h=f?d.Slot:c;return(0,e.jsx)(h,{...g,ref:b})});return f.displayName=`Primitive.${c}`,{...a,[c]:f}},{});function g(a,b){a&&c.flushSync(()=>a.dispatchEvent(b))}a.s(["Primitive",()=>f,"dispatchDiscreteCustomEvent",()=>g])},40695,a=>{"use strict";let b,c;var d=a.i(87924),e=a.i(11011),f=a.i(98621);let g=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,h=f.clsx;var i=a.i(97895);let j=(b="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",c={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}},a=>{var d;if((null==c?void 0:c.variants)==null)return h(b,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:e,defaultVariants:f}=c,i=Object.keys(e).map(b=>{let c=null==a?void 0:a[b],d=null==f?void 0:f[b];if(null===c)return null;let h=g(c)||g(d);return e[b][h]}),j=a&&Object.entries(a).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return h(b,i,null==c||null==(d=c.compoundVariants)?void 0:d.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...f,...j}[b]):({...f,...j})[b]===c})?[...a,c,d]:a},[]),null==a?void 0:a.class,null==a?void 0:a.className)});function k({className:a,variant:b,size:c,asChild:f=!1,...g}){let h=f?e.Slot:"button";return(0,d.jsx)(h,{"data-slot":"button",className:(0,i.cn)(j({variant:b,size:c,className:a})),...g})}a.s(["Button",()=>k],40695)},5522,17171,77687,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d],5522);var e=a.i(72131),f=a.i(30553),g=e.forwardRef((a,c)=>(0,b.jsx)(f.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));function h({className:a,...d}){return(0,b.jsx)(g,{"data-slot":"label",className:(0,c.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...d})}g.displayName="Label",a.s(["Label",()=>h],17171);let i=0,j=new Map,k=a=>{if(j.has(a))return;let b=setTimeout(()=>{j.delete(a),n({type:"REMOVE_TOAST",toastId:a})},1e6);j.set(a,b)},l=[],m={toasts:[]};function n(a){m=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?k(c):a.toasts.forEach(a=>{k(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(m,a),l.forEach(a=>{a(m)})}function o({...a}){let b=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),c=()=>n({type:"DISMISS_TOAST",toastId:b});return n({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||c()}}}),{id:b,dismiss:c,update:a=>n({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function p(){let[a,b]=e.useState(m);return e.useEffect(()=>(l.push(b),()=>{let a=l.indexOf(b);a>-1&&l.splice(a,1)}),[a]),{...a,toast:o,dismiss:a=>n({type:"DISMISS_TOAST",toastId:a})}}a.s(["useToast",()=>p],77687)},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function j({className:a,...d}){return(0,b.jsx)("caption",{"data-slot":"table-caption",className:(0,c.cn)("text-muted-foreground mt-4 text-sm",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCaption",()=>j,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},97404,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(88237),f=a.i(5522),g=a.i(17171),h=a.i(40695),i=a.i(77687);function j(){let{toast:a}=(0,i.useToast)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)({name:""}),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)({}),[t,u]=(0,c.useState)(0),[v,w]=(0,c.useState)({});async function x(){m(!0);try{let a=await fetch("/api/gifts"),b=await a.json();k(Array.isArray(b)?b:[])}finally{m(!1)}}async function y(){if(!n.name.trim())return void a({title:"Nome obrigatório"});m(!0);try{let b=new FormData;b.append("name",n.name.trim()),p&&b.append("image",p),(await fetch("/api/gifts",{method:"POST",body:b})).ok?(o({name:""}),q(null),u(a=>a+1),await x(),a({title:"Presente cadastrado"})):a({title:"Erro ao cadastrar"})}finally{m(!1)}}async function z(b,c,d){m(!0);try{let e;if(d&&d.size>0){let a=new FormData;c.name&&a.append("name",c.name),a.append("image",d),e=await fetch(`/api/gifts/${b}`,{method:"PUT",body:a})}else e=await fetch(`/api/gifts/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});e.ok?(await x(),s(a=>({...a,[b]:null})),w(a=>({...a,[b]:(a[b]||0)+1})),a({title:"Presente atualizado"})):a({title:"Erro ao atualizar"})}finally{m(!1)}}async function A(b){m(!0);try{let c=await fetch(`/api/gifts/${b}`,{method:"DELETE"});if(c.ok)await x(),a({title:"Presente removido"});else{let b=await c.json().catch(()=>({}));409===c.status||b?.error==="claimed"?a({title:"Não permitido",description:"Este presente já foi escolhido"}):a({title:"Erro ao remover"})}}finally{m(!1)}}return(0,c.useEffect)(()=>{x()},[]),(0,b.jsx)("section",{className:"py-20 px-4",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h2",{className:"font-serif text-4xl md:text-5xl text-foreground mb-2",children:"Cadastro de Presentes"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gerencie os presentes exibidos na lista"})]}),(0,b.jsx)(d.Card,{className:"border-border/50 shadow-lg mb-8",children:(0,b.jsxs)(d.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"gift-name",children:"Nome"}),(0,b.jsx)(f.Input,{id:"gift-name",value:n.name,onChange:a=>o({name:a.target.value}),placeholder:"Ex: Jogo de Panelas"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"gift-image",children:"Imagem"}),(0,b.jsx)(f.Input,{id:"gift-image",type:"file",accept:"image/*",onChange:a=>q(a.target.files?.[0]||null)},t)]})]}),(0,b.jsx)("div",{className:"flex justify-end mt-4",children:(0,b.jsx)(h.Button,{onClick:y,disabled:l,className:"bg-primary text-primary-foreground",children:l?"Salvando...":"Cadastrar"})})]})}),(0,b.jsx)(d.Card,{className:"border-border/50 shadow-lg",children:(0,b.jsxs)(d.CardContent,{className:"p-4 md:p-6",children:[(0,b.jsx)("div",{className:"flex justify-end mb-3",children:(0,b.jsx)(h.Button,{variant:"outline",onClick:x,disabled:l,children:l?"Atualizando...":"Atualizar"})}),(0,b.jsxs)(e.Table,{children:[(0,b.jsx)(e.TableHeader,{children:(0,b.jsxs)(e.TableRow,{children:[(0,b.jsx)(e.TableHead,{children:"Nome"}),(0,b.jsx)(e.TableHead,{children:"Imagem"}),(0,b.jsx)(e.TableHead,{children:"Status"}),(0,b.jsx)(e.TableHead,{children:"Ações"})]})}),(0,b.jsx)(e.TableBody,{children:j.map(a=>(0,b.jsxs)(e.TableRow,{children:[(0,b.jsx)(e.TableCell,{className:"max-w-[240px]",children:(0,b.jsx)(f.Input,{value:a.name,onChange:b=>k(c=>c.map(c=>c.id===a.id?{...c,name:b.target.value}:c))})}),(0,b.jsx)(e.TableCell,{className:"max-w-[260px]",children:(0,b.jsx)(f.Input,{type:"file",accept:"image/*",onChange:b=>s(c=>({...c,[a.id]:b.target.files?.[0]||null}))},v[a.id]||0)}),(0,b.jsx)(e.TableCell,{children:a.claimed?"Escolhido":"Disponível"}),(0,b.jsxs)(e.TableCell,{className:"flex gap-2",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>z(a.id,{name:a.name},r[a.id]||null),children:"Salvar"}),(0,b.jsx)(h.Button,{variant:"destructive",disabled:a.claimed,onClick:()=>A(a.id),children:"Excluir"})]})]},a.id))}),(0,b.jsx)(e.TableCaption,{children:0===j.length?"Nenhum presente cadastrado":`${j.length} presentes`})]})]})})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=_dd5831c0._.js.map